{% extends "base.html" %}

{% block title %}Read It Now - 1-Minute Article Summaries{% endblock %}

{% block extra_css %}
<style>

</style>
{% endblock %}

{% block content %}
<div class="container text-center">
    <h1 class="">Read It Now</h1>
    <p class="subtitle">
        An article could be lengthy and boring, here comes the solution an AI article summarizer which summarizes a article no
        matter how long into a 1 minute readable, so no more laziness or hesitation just "READ-IT-NOW". Certain websites have
        strong anti bot measures and geo fencing issues please try a different website for the article. The project uses a
        custom made AI agent which helps in scraping content and parsing the useful info to AI to summarize all backed by hack
        club AI. It is hosted on NEST and will take a bit time for processing the data so kindly be patient.
    </p>
    
    <form id="summaryForm">
        <div class="mb-3">
            <input 
                type="url" 
                id="url" 
                name="url"
                class="form-control form-control-lg"
                placeholder="Paste any article URL here (news, blog, research...)"
                required
            >
        </div>
        <button type="submit" class="btn btn-primary btn-lg w-100">
            Get Summary
        </button>
    </form>
    
    <div class="loading" id="loading" style="display: none; margin: 0 auto; text-align: center;">
        <div class="spinner" style="margin: 0 auto;"></div>
        <p style="margin-top: 10px;"><strong>AI is reading and analyzing...</strong><br>
        This takes 15-20 seconds for quality extraction</p>
    </div>
    
    <div class="features mt-5">
        <h3 style="margin-bottom: 15px; color: #333;">What you get:</h3>
        <ul class="list-unstyled">
            <li class="mb-2">Clean article title and content</li>
            <li class="mb-2">1 minute AI summary</li>
            <li class="mb-2">Handles most news/blog/research sites</li>
            <li class="mb-2">Powered by Hack Club AI</li>
        </ul>
        
    </div>
</div>

<script>
    function fillUrl(url) {
        document.getElementById('url').value = url;
    }
    
    document.getElementById('summaryForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const url = document.getElementById('url').value;
        const loading = document.getElementById('loading');
        const form = document.getElementById('summaryForm');
        
        // Show loading state
        loading.style.display = 'block';
        form.style.display = 'none';
        
        try {
            const response = await fetch('/summarize', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ url: url })
            });
            
            const data = await response.json();
            
            if (data.success) {
                // Store result and redirect
                sessionStorage.setItem('summaryResult', JSON.stringify(data));
                window.location.href = '/summary';
            } else {
                alert('Error: ' + data.error);
                loading.style.display = 'none';
                form.style.display = 'block';
            }
        } catch (error) {
            alert('Error: ' + error.message);
            loading.style.display = 'none';
            form.style.display = 'block';
        }
    });
</script>
{% endblock %}
